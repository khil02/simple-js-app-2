let pokemonRepository=function(){let e=[],t=document.querySelector(".modal-content");function n(t){"object"!=typeof t?console.log("error not an object"):"name"in t==!1?console.log("error does not contain required information: name"):e.push(t)}function o(){return e}function a(e){let t=document.querySelector(".pokemon-list"),n=document.createElement("li"),o=document.createElement("button");o.innerText=e.name,o.setAttribute("data-toggle","modal"),o.setAttribute("data-target","#modal-container"),o.setAttribute("aria-pressed","false"),o.setAttribute("autocomplete","off"),$(o).addClass("pokedexButton list-group-item btn col btn-outline-info"),$(n).addClass("list-group-item"),n.appendChild(o),t.appendChild(n),o.addEventListener("click",()=>{i(e)})}function i(e){l(e).then(function(){var n;let o,a,i,r,l,s,p,d;n=e,o=$(".modal-body"),a=$(".modal-title"),a.empty(),o.empty(),i=$("<h1>"+n.name+"</h1>"),r=$("<p>Height: "+(.1*n.height).toFixed(2)+"</p>"),l=$("<p> Weight: "+.1*n.weight+"kg</p>"),s=$("<p>Types:"+n.types.map(e=>" "+e.type.name.charAt(0).toUpperCase()+e.type.name.substr(1))+"</p>"),p=$("<p>Abilities:"+n.abilities.map(e=>" "+e.ability.name.charAt(0).toUpperCase()+e.ability.name.substr(1))+"</p>"),d=$("<img class = modal-image style='width:100%'>"),d.attr("src",t.classList.contains("fancy")?n.imageUrlFancy:n.imageUrl),c&&$(".modal-content").addClass("fancy"),a.append(i),o.append(d),o.append(r),o.append(l),o.append(s),o.append(p)})}function r(){let e=document.querySelector("#loadingBall");e.parentElement.removeChild(e)}function l(e){return fetch(e.detailsUrl).then(function(e){return e.json()}).then(function(t){e.imageUrl=t.sprites.front_default,e.height=t.height,e.weight=t.weight,e.types=t.types,e.imageUrlFancy=t.sprites.other["official-artwork"].front_default,e.abilities=t.abilities}).catch(function(e){console.error(e)})}let s=document.querySelector(".fancy-mode"),c=!1;s.addEventListener("click",function e(){t.classList.toggle("fancy"),(c=!c)?s.innerText="Fancy Mode: On":s.innerText="Fancy Mode: Off"});function p(){let t=$(".modal-body"),n=$(".modal-title");n.empty(),t.empty();let o=document.querySelector("#searchFor").value,r=e.filter(e=>e.name.toLowerCase().startsWith(o.toLowerCase()));0==r.length?(resultScreen=$("<h1>Results</h1>"),noneFound=$("<p>No results match that search</p>"),n.append(resultScreen),t.append(noneFound),console.log(r),$("#modal-container").modal("toggle")):1==r.length?(i(r[0]),$("#modal-container").modal("toggle")):r.length>=1&&((pokemonListElement=document.querySelector(".pokemon-list")).innerHTML=" ",r.forEach(function(e){a(e)}))}return document.querySelector("#search-button").addEventListener("click",p),{add:n,getAll:o,search:p,addListItem:a,loadList:function e(){let t;return(t=document.getElementById("loadingBox")).innerHTML='<img src="img/Ball-1s-200px.svg" id="loadingBall">',fetch("https://pokeapi.co/api/v2/pokemon/?limit=151").then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){n({name:e.name.charAt(0).toUpperCase()+e.name.substr(1),detailsUrl:e.url})}),r()}).catch(function(e){r(),console.error(e)})},loadDetails:l,showDetails:i}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});