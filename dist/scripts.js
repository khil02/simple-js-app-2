let pokemonRepository=function(){let e=[],t=[],o="https://pokeapi.co/api/v2/pokemon/?limit=151",n=document.querySelector(".modal-content"),i=0,a=["https://pokeapi.co/api/v2/pokemon/?limit=151","https://pokeapi.co/api/v2/pokemon/?limit=100&offset=151","https://pokeapi.co/api/v2/pokemon/?limit=135&offset=251","https://pokeapi.co/api/v2/pokemon/?limit=106&offset=386","https://pokeapi.co/api/v2/pokemon/?limit=155&offset=493","https://pokeapi.co/api/v2/pokemon/?limit=71&offset=649","https://pokeapi.co/api/v2/pokemon/?limit=87&offset=721","https://pokeapi.co/api/v2/pokemon/?limit=95&offset=809","https://pokeapi.co/api/v2/pokemon/?limit=103&offset=905",],l=document.querySelector("#generation-dropdown");function r(t){"object"!=typeof t?console.log("error not an object"):"name"in t==!1?console.log("error does not contain required information: name"):e.push(t)}function p(){return m&&d(),e=t[i]}function s(e){let t=document.querySelector(".pokemon-list"),o=document.createElement("li"),n=document.createElement("button");n.innerText=e.name,n.setAttribute("data-toggle","modal"),n.setAttribute("data-target","#modal-container"),n.setAttribute("aria-pressed","false"),n.setAttribute("autocomplete","off"),$(n).addClass("pokedexButton list-group-item btn col btn-outline-info"),$(o).addClass("list-group-item col col-12 col-sm-6 col-md-4"),o.appendChild(n),t.appendChild(o),n.addEventListener("click",()=>{c(e)})}function c(e){u(e).then(function(){var t;let o,i,a,l,r,p,s,c;t=e,o=$(".modal-body"),i=$(".modal-title"),i.empty(),o.empty(),a=$("<h1>"+t.name+"</h1>"),l=$("<p>Height: "+(.1*t.height).toFixed(2)+"</p>"),r=$("<p> Weight: "+.1*t.weight+"kg</p>"),p=$("<p>Types:"+t.types.map(e=>" "+e.type.name.charAt(0).toUpperCase()+e.type.name.substr(1))+"</p>"),s=$("<p>Abilities:"+t.abilities.map(e=>" "+e.ability.name.charAt(0).toUpperCase()+e.ability.name.substr(1))+"</p>"),c=$("<img class = modal-image style='width:100%'>"),c.attr("src",n.classList.contains("fancy")?t.imageUrlFancy:t.imageUrl),h&&$(".modal-content").addClass("fancy"),i.append(a),o.append(c),o.append(l),o.append(r),o.append(p),o.append(s)})}document.querySelectorAll(".gen").forEach(t=>{t.addEventListener("click",()=>{var n;i=t.value,genText=t.innerText,o=a[n=i],l.innerText=genText,(pokemonListElement=document.querySelector(".pokemon-list")).innerHTML=" ",e=[],p().forEach(function(e){s(e)})})});let m=!1;function d(){m=!1;let e=document.querySelector("#loadingBall");e.parentElement.removeChild(e)}function u(e){return fetch(e.detailsUrl).then(function(e){return e.json()}).then(function(t){e.imageUrl=t.sprites.front_default,e.height=t.height,e.weight=t.weight,e.types=t.types,e.imageUrlFancy=t.sprites.other["official-artwork"].front_default,e.abilities=t.abilities}).catch(function(e){console.error(e)})}let f=document.querySelector(".fancy-mode"),h=!1;f.addEventListener("click",function e(){n.classList.toggle("fancy"),(h=!h)?f.innerText="Fancy Mode: On":f.innerText="Fancy Mode: Off"});function g(){let o=$(".modal-body"),n=$(".modal-title");n.empty(),o.empty();let i=[],a=document.querySelector("#searchFor").value;for(let l=0;l<t.length;l++)e=t[l].filter(e=>e.name.toLowerCase().startsWith(a.toLowerCase())),i.push(...e);0==i.length?(resultScreen=$("<h1>Results</h1>"),noneFound=$("<p>No results match that search</p>"),n.append(resultScreen),o.append(noneFound),console.log(i),$("#modal-container").modal("toggle")):1==i.length?(c(i[0]),$("#modal-container").modal("toggle")):i.length>=1&&((pokemonListElement=document.querySelector(".pokemon-list")).innerHTML=" ",i.forEach(function(e){s(e)}))}return document.querySelector("#search-button").addEventListener("click",g),{add:r,getAll:p,search:g,addListItem:s,loadList:function o(){let n;return n=document.getElementById("loadingBox"),m=!0,n.innerHTML='<img src="img/Ball-1s-200px.svg" id="loadingBall">',Promise.all(a.map(o=>fetch(o).then(function(e){return e.json()}).then(function(o){o.results.forEach(function(e){r({name:e.name.charAt(0).toUpperCase()+e.name.substr(1),detailsUrl:e.url})}),t.push(e),e=[]}).catch(function(e){d(),console.error(e)})))},loadDetails:u,showDetails:c}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});