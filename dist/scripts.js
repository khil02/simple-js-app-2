let pokemonRepository=function(){let e=[],t="https://pokeapi.co/api/v2/pokemon/?limit=151",o=document.querySelector(".modal-content");function n(t){"object"!=typeof t?console.log("error not an object"):"name"in t==!1?console.log("error does not contain required information: name"):e.push(t)}function i(){return e}function a(e){let t=document.querySelector(".pokemon-list"),o=document.createElement("li"),n=document.createElement("button");n.innerText=e.name,n.setAttribute("data-toggle","modal"),n.setAttribute("data-target","#modal-container"),n.setAttribute("aria-pressed","false"),n.setAttribute("autocomplete","off"),$(n).addClass("pokedexButton list-group-item btn col btn-outline-info"),$(o).addClass("list-group-item col"),o.appendChild(n),t.appendChild(o),n.addEventListener("click",()=>{l(e)})}function l(e){s(e).then(function(){var t;let n,i,a,l,p,r,s,c;t=e,n=$(".modal-body"),i=$(".modal-title"),i.empty(),n.empty(),a=$("<h1>"+t.name+"</h1>"),l=$("<p>Height: "+(.1*t.height).toFixed(2)+"</p>"),p=$("<p> Weight: "+.1*t.weight+"kg</p>"),r=$("<p>Types:"+t.types.map(e=>" "+e.type.name.charAt(0).toUpperCase()+e.type.name.substr(1))+"</p>"),s=$("<p>Abilities:"+t.abilities.map(e=>" "+e.ability.name.charAt(0).toUpperCase()+e.ability.name.substr(1))+"</p>"),c=$("<img class = modal-image style='width:100%'>"),c.attr("src",o.classList.contains("fancy")?t.imageUrlFancy:t.imageUrl),m&&$(".modal-content").addClass("fancy"),i.append(a),n.append(c),n.append(l),n.append(p),n.append(r),n.append(s)})}function p(){let e=document.querySelector("#loadingBall");e.parentElement.removeChild(e)}function r(){let e;return(e=document.getElementById("loadingBox")).innerHTML='<img src="img/Ball-1s-200px.svg" id="loadingBall">',fetch(t).then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){n({name:e.name.charAt(0).toUpperCase()+e.name.substr(1),detailsUrl:e.url})}),p()}).catch(function(e){p(),console.error(e)})}function s(e){return fetch(e.detailsUrl).then(function(e){return e.json()}).then(function(t){e.imageUrl=t.sprites.front_default,e.height=t.height,e.weight=t.weight,e.types=t.types,e.imageUrlFancy=t.sprites.other["official-artwork"].front_default,e.abilities=t.abilities}).catch(function(e){console.error(e)})}document.querySelectorAll(".gen").forEach(o=>{o.addEventListener("click",()=>{var n;let i=o.value;console.log(i),t=["https://pokeapi.co/api/v2/pokemon/?limit=151","https://pokeapi.co/api/v2/pokemon/?limit=100&offset=151","https://pokeapi.co/api/v2/pokemon/?limit=135&offset=251","https://pokeapi.co/api/v2/pokemon/?limit=106&offset=386","https://pokeapi.co/api/v2/pokemon/?limit=155&offset=493","https://pokeapi.co/api/v2/pokemon/?limit=71&offset=649","https://pokeapi.co/api/v2/pokemon/?limit=87&offset=721","https://pokeapi.co/api/v2/pokemon/?limit=95&offset=809","https://pokeapi.co/api/v2/pokemon/?limit=103&offset=905"][n=i],(pokemonListElement=document.querySelector(".pokemon-list")).innerHTML=" ",e=[],r().then(function(){e.forEach(function(e){a(e)})})})});let c=document.querySelector(".fancy-mode"),m=!1;c.addEventListener("click",function e(){o.classList.toggle("fancy"),(m=!m)?c.innerText="Fancy Mode: On":c.innerText="Fancy Mode: Off"});function d(){let t=$(".modal-body"),o=$(".modal-title");o.empty(),t.empty();let n=document.querySelector("#searchFor").value,i=e.filter(e=>e.name.toLowerCase().startsWith(n.toLowerCase()));0==i.length?(resultScreen=$("<h1>Results</h1>"),noneFound=$("<p>No results match that search</p>"),o.append(resultScreen),t.append(noneFound),console.log(i),$("#modal-container").modal("toggle")):1==i.length?(l(i[0]),$("#modal-container").modal("toggle")):i.length>=1&&((pokemonListElement=document.querySelector(".pokemon-list")).innerHTML=" ",i.forEach(function(e){a(e)}))}return document.querySelector("#search-button").addEventListener("click",d),{add:n,getAll:i,search:d,addListItem:a,loadList:r,loadDetails:s,showDetails:l}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});